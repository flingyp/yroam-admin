import{Y as w,i as N,d as I,t as D,a as U,u as z,r as v,b as h,o as M,c as S,e as P,f as V,g as l,h as s,w as o,N as j,j as y,k as L,l as B,m,n as _,p as R,q as b,s as q,_ as E}from"./index-da51f142.js";import{N as H,a as f}from"./FormItem-031f6fb2.js";const O=async()=>await w.request({url:"/user/list",method:"POST"});function A(){const r=N(I,null);return r===null&&D("use-dialog","No outer <n-dialog-provider /> founded."),r}const F={style:{"text-align":"right"}},Y=U({__name:"CommonDataTable",setup(r){const C=({play:a})=>[{title:"id",key:"id",fixed:"left",width:200},{title:"姓名",key:"username",width:100},{title:"年龄",key:"age",width:60},{title:"出生日期",key:"birthday",width:120},{title:"地址",key:"address"},{title:"邮箱",key:"email"},{title:"账号状态",key:"status",width:100,render(e){const i=e.status===1?"success":"warning",t=e.status===1?"正常":"已禁用";return b(q,{type:i},{default:()=>t})}},{title:"行为",key:"actions",width:200,fixed:"right",render(e){return[b(m,{type:"primary",size:"small",style:{marginRight:"6px"},onClick:()=>a(e,"modify")},{default:()=>"修改"}),b(m,{strong:!0,tertiary:!0,size:"small",onClick:()=>a(e,"delete")},{default:()=>"删除"})]}}],c=z(),k=A(),g=v(!0),p=h({page:1,pageSize:15,showSizePicker:!0,pageSizes:[5,10,15,20],onChange:a=>{p.page=a},onUpdatePageSize:a=>{p.pageSize=a,p.page=1}}),u=v([]),n=h({id:"",birthday:"",status:0,username:"",age:0,email:"",address:""}),d=v(!1),T=C({play(a,e){e==="modify"?(Object.assign(n,a),d.value=!0):e==="delete"&&k.warning({title:"删除用户",content:"确定删除用户？",positiveText:"删除",negativeText:"取消",onPositiveClick:()=>{const i=u.value.findIndex(t=>t.id===a.id);i===-1?c.error("用户不存在"):(u.value.splice(i,1),c.success("删除成功！"))},onNegativeClick:()=>{}})}}),x=()=>{u.value.forEach(a=>{a.id===n.id&&(Object.assign(a,n),c.success("修改成功"))}),setTimeout(()=>{d.value=!1},1e3)};return M(async()=>{const a=await O();a&&(u.value=a,g.value=!1)}),(a,e)=>{const i=S("DataTable");return P(),V("div",null,[l(i,{IsLoading:g.value,"onUpdate:IsLoading":e[0]||(e[0]=t=>g.value=t),TableColumns:s(T),TableData:u.value,TableMaxHeight:620,ScrollX:2e3,IsPagination:p},null,8,["IsLoading","TableColumns","TableData","IsPagination"]),l(s(R),{show:d.value,"onUpdate:show":e[6]||(e[6]=t=>d.value=t)},{default:o(()=>[l(s(j),{style:{width:"700px"},title:"修改用户",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:o(()=>[l(s(H),{class:"form-container",ref:"formRef",model:n,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",size:"medium"},{default:o(()=>[l(s(f),{label:"用户名",path:"usernameValue"},{default:o(()=>[l(s(y),{value:n.username,"onUpdate:value":e[1]||(e[1]=t=>n.username=t),placeholder:"please input username"},null,8,["value"])]),_:1}),l(s(f),{label:"家庭地址",path:"inputValue"},{default:o(()=>[l(s(y),{value:n.address,"onUpdate:value":e[2]||(e[2]=t=>n.address=t),placeholder:"please input address"},null,8,["value"])]),_:1}),l(s(f),{label:"年龄",path:"inputValue"},{default:o(()=>[l(s(L),{value:n.age,"onUpdate:value":e[3]||(e[3]=t=>n.age=t),placeholder:"please select your age"},null,8,["value"])]),_:1}),l(s(f),{label:"邮箱地址",path:"inputValue"},{default:o(()=>[l(s(y),{value:n.email,"onUpdate:value":e[4]||(e[4]=t=>n.email=t),placeholder:"please input email"},null,8,["value"])]),_:1})]),_:1},8,["model"]),B("div",F,[l(s(m),{style:{"margin-right":"10px"},secondary:"",onClick:e[5]||(e[5]=()=>d.value=!1)},{default:o(()=>[_("取消")]),_:1}),l(s(m),{type:"info",onClick:x},{default:o(()=>[_("确定")]),_:1})])]),_:1})]),_:1},8,["show"])])}}});const G=E(Y,[["__scopeId","data-v-cb323cd7"]]);export{G as default};
