import{Y as k,i as T,d as x,t as w,a as B,r as v,b as h,o as N,c as I,e as U,f as z,g as u,u as l,w as n,N as A,h as y,j as M,k as S,l as m,m as D,n as P,p as b,q as V,_ as j}from"./index.7a2633fe.js";import{u as L}from"./use-message.770e1c6d.js";import{N as R,a as f}from"./FormItem.53976109.js";const q=async()=>await k.request({url:"/user/list",method:"POST"});function H(){const d=T(x,null);return d===null&&w("use-dialog","No outer <n-dialog-provider /> founded."),d}const O={style:{"text-align":"right"}},Y=B({__name:"CommonDataTable",setup(d){const C=({play:a})=>[{title:"id",key:"id",fixed:"left",width:200},{title:"\u59D3\u540D",key:"username",width:100},{title:"\u5E74\u9F84",key:"age",width:60},{title:"\u51FA\u751F\u65E5\u671F",key:"birthday",width:120},{title:"\u5730\u5740",key:"address"},{title:"\u90AE\u7BB1",key:"email"},{title:"\u8D26\u53F7\u72B6\u6001",key:"status",width:100,render(e){const o=e.status===1?"success":"warning",t=e.status===1?"\u6B63\u5E38":"\u5DF2\u7981\u7528";return b(V,{type:o},{default:()=>t})}},{title:"\u884C\u4E3A",key:"actions",width:200,fixed:"right",render(e){return[b(m,{type:"primary",size:"small",style:{marginRight:"6px"},onClick:()=>a(e,"modify")},{default:()=>"\u4FEE\u6539"}),b(m,{strong:!0,tertiary:!0,size:"small",onClick:()=>a(e,"delete")},{default:()=>"\u5220\u9664"})]}}],c=L(),_=H(),g=v(!0),p=h({page:1,pageSize:15,showSizePicker:!0,pageSizes:[5,10,15,20],onChange:a=>{p.page=a},onUpdatePageSize:a=>{p.pageSize=a,p.page=1}}),i=v([]),s=h({id:"",birthday:"",status:0,username:"",age:0,email:"",address:""}),r=v(!1),E=C({play(a,e){e==="modify"?(Object.assign(s,a),r.value=!0):e==="delete"&&_.warning({title:"\u5220\u9664\u7528\u6237",content:"\u786E\u5B9A\u5220\u9664\u7528\u6237\uFF1F",positiveText:"\u5220\u9664",negativeText:"\u53D6\u6D88",onPositiveClick:()=>{const o=i.value.findIndex(t=>t.id===a.id);o===-1?c.error("\u7528\u6237\u4E0D\u5B58\u5728"):(i.value.splice(o,1),c.success("\u5220\u9664\u6210\u529F\uFF01"))},onNegativeClick:()=>{console.log("\u70B9\u51FB\u53D6\u6D88\u5220\u9664\u7528\u6237")}})}}),F=()=>{i.value.forEach(a=>{a.id===s.id&&(Object.assign(a,s),c.success("\u4FEE\u6539\u6210\u529F"))}),setTimeout(()=>{r.value=!1},1e3)};return N(async()=>{const a=await q();a&&(i.value=a,g.value=!1)}),(a,e)=>{const o=I("DataTable");return U(),z("div",null,[u(o,{IsLoading:g.value,"onUpdate:IsLoading":e[0]||(e[0]=t=>g.value=t),TableColumns:l(E),TableData:i.value,TableMaxHeight:620,ScrollX:2e3,IsPagination:p},null,8,["IsLoading","TableColumns","TableData","IsPagination"]),u(l(P),{show:r.value,"onUpdate:show":e[6]||(e[6]=t=>r.value=t)},{default:n(()=>[u(l(A),{style:{width:"700px"},title:"\u4FEE\u6539\u7528\u6237",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:n(()=>[u(l(R),{class:"form-container",ref:"formRef",model:s,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",size:"medium"},{default:n(()=>[u(l(f),{label:"\u7528\u6237\u540D",path:"usernameValue"},{default:n(()=>[u(l(y),{value:s.username,"onUpdate:value":e[1]||(e[1]=t=>s.username=t),placeholder:"please input username"},null,8,["value"])]),_:1}),u(l(f),{label:"\u5BB6\u5EAD\u5730\u5740",path:"inputValue"},{default:n(()=>[u(l(y),{value:s.address,"onUpdate:value":e[2]||(e[2]=t=>s.address=t),placeholder:"please input address"},null,8,["value"])]),_:1}),u(l(f),{label:"\u5E74\u9F84",path:"inputValue"},{default:n(()=>[u(l(M),{value:s.age,"onUpdate:value":e[3]||(e[3]=t=>s.age=t),placeholder:"please select your age"},null,8,["value"])]),_:1}),u(l(f),{label:"\u90AE\u7BB1\u5730\u5740",path:"inputValue"},{default:n(()=>[u(l(y),{value:s.email,"onUpdate:value":e[4]||(e[4]=t=>s.email=t),placeholder:"please input email"},null,8,["value"])]),_:1})]),_:1},8,["model"]),S("div",O,[u(l(m),{style:{"margin-right":"10px"},secondary:"",onClick:e[5]||(e[5]=()=>r.value=!1)},{default:n(()=>[D("\u53D6\u6D88")]),_:1}),u(l(m),{type:"info",onClick:F},{default:n(()=>[D("\u786E\u5B9A")]),_:1})])]),_:1})]),_:1},8,["show"])])}}});const J=j(Y,[["__scopeId","data-v-cb323cd7"]]);export{J as default};
