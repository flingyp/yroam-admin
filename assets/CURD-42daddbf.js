import{Y as B,i as E,d as F,t as L,a as q,u as O,r as b,b as C,o as A,c as H,e as k,f as x,g as l,w as s,h as g,F as Y,j as K,k as G,l as e,N as v,m as i,n as p,p as r,q as J,s as Q,v as W,x as w,y as X,_ as Z}from"./index-dc421378.js";import{N as $,a as y}from"./FormItem-e003c599.js";const ee=async()=>await B.request({url:"/user/list",method:"POST"});function ae(){const f=E(F,null);return f===null&&L("use-dialog","No outer <n-dialog-provider /> founded."),f}const te={class:"search-list-container"},le={class:"handle-container"},ne={style:{"text-align":"right"}},se=q({__name:"CURD",setup(f){const h=O(),N=ae(),U=({play:n})=>[{title:"id",key:"id",fixed:"left",width:200},{title:"姓名",key:"username",width:100},{title:"年龄",key:"age",width:60},{title:"出生日期",key:"birthday",width:120},{title:"地址",key:"address"},{title:"邮箱",key:"email"},{title:"账号状态",key:"status",width:100,render(a){const d=a.status===1?"success":"warning",t=a.status===1?"正常":"已禁用";return w(X,{type:d},{default:()=>t})}},{title:"行为",key:"actions",width:200,fixed:"right",render(a){return[w(i,{type:"primary",size:"small",style:{marginRight:"6px"},onClick:()=>n(a,"modify")},{default:()=>"修改"}),w(i,{strong:!0,tertiary:!0,size:"small",onClick:()=>n(a,"delete")},{default:()=>"删除"})]}}],_=b(!1),u=b(!1),o=C({id:"",birthday:"",status:0,username:"",age:0,email:"",address:""}),m=C({page:1,pageSize:10,showSizePicker:!0,pageSizes:[5,10,15,20],onChange:n=>{m.page=n},onUpdatePageSize:n=>{m.pageSize=n,m.page=1}}),c=b([]),I=U({play(n,a){a==="modify"?(Object.assign(o,n),u.value=!0):a==="delete"&&N.warning({title:"删除用户",content:"确定删除用户？",positiveText:"删除",negativeText:"取消",onPositiveClick:()=>{const d=c.value.findIndex(t=>t.id===n.id);d===-1?h.error("用户不存在"):(c.value.splice(d,1),h.success("删除成功！"))},onNegativeClick:()=>{}})}}),z=()=>{c.value.forEach(n=>{n.id===o.id&&(Object.assign(n,o),h.success("修改成功"))}),setTimeout(()=>{u.value=!1},1e3)},D=C([{label:"用户ID",key:"userid",placeholder:"请输入用户ID",value:""},{label:"用户姓名",key:"username",placeholder:"请输入用户姓名",value:""},{label:"用户邮箱",key:"useremail",placeholder:"请输入用户邮箱",value:""}]),S=()=>{},T=()=>{D.forEach(n=>{n.value=""})},P=()=>{},R=()=>{},V=()=>{};return A(async()=>{const n=await ee();n&&(c.value=n,_.value=!1)}),(n,a)=>{const d=H("CommonCurd");return k(),x("div",null,[l(d,{loading:_.value,"onUpdate:loading":a[0]||(a[0]=t=>_.value=t),tableColumns:e(I),tableData:c.value,isPagination:m},{search:s(()=>[g("div",te,[(k(!0),x(Y,null,K(D,(t,j)=>(k(),x("div",{key:j},[g("span",null,G(t.label),1),l(e(v),{value:t.value,"onUpdate:value":M=>t.value=M,type:"text",placeholder:t.placeholder},null,8,["value","onUpdate:value","placeholder"])]))),128)),l(e(i),{type:"primary","render-icon":e(p)("search",14),onClick:S},{default:s(()=>[r(" 搜索 ")]),_:1},8,["render-icon"]),l(e(i),{type:"info","render-icon":e(p)("clear",14),onClick:T},{default:s(()=>[r(" 重置 ")]),_:1},8,["render-icon"])])]),handle:s(()=>[g("div",le,[l(e(i),{type:"primary","render-icon":e(p)("add-one",14),onClick:P},{default:s(()=>[r(" 新增 ")]),_:1},8,["render-icon"]),l(e(i),{type:"info","render-icon":e(p)("modify",14),onClick:R},{default:s(()=>[r(" 修改 ")]),_:1},8,["render-icon"]),l(e(i),{type:"error","render-icon":e(p)("delete",14),onClick:V},{default:s(()=>[r(" 删除 ")]),_:1},8,["render-icon"])])]),_:1},8,["loading","tableColumns","tableData","isPagination"]),l(e(W),{show:u.value,"onUpdate:show":a[6]||(a[6]=t=>u.value=t)},{default:s(()=>[l(e(J),{style:{width:"600px"},title:"修改用户",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:s(()=>[l(e($),{class:"form-container",ref:"formRef",model:o,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",size:"medium"},{default:s(()=>[l(e(y),{label:"用户名",path:"usernameValue"},{default:s(()=>[l(e(v),{value:o.username,"onUpdate:value":a[1]||(a[1]=t=>o.username=t),placeholder:"please input username"},null,8,["value"])]),_:1}),l(e(y),{label:"家庭地址",path:"inputValue"},{default:s(()=>[l(e(v),{value:o.address,"onUpdate:value":a[2]||(a[2]=t=>o.address=t),placeholder:"please input address"},null,8,["value"])]),_:1}),l(e(y),{label:"年龄",path:"inputValue"},{default:s(()=>[l(e(Q),{value:o.age,"onUpdate:value":a[3]||(a[3]=t=>o.age=t),placeholder:"please select your age"},null,8,["value"])]),_:1}),l(e(y),{label:"邮箱地址",path:"inputValue"},{default:s(()=>[l(e(v),{value:o.email,"onUpdate:value":a[4]||(a[4]=t=>o.email=t),placeholder:"please input email"},null,8,["value"])]),_:1})]),_:1},8,["model"]),g("div",ne,[l(e(i),{style:{"margin-right":"10px"},secondary:"",onClick:a[5]||(a[5]=()=>u.value=!1)},{default:s(()=>[r("取消")]),_:1}),l(e(i),{type:"info",onClick:z},{default:s(()=>[r("确定")]),_:1})])]),_:1})]),_:1},8,["show"])])}}});const re=Z(se,[["__scopeId","data-v-df25f5b7"]]);export{re as default};
